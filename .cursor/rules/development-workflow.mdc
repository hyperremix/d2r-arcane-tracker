---
alwaysApply: true
description: Development workflow and best practices
---

# Development Workflow

## Code Quality

- **Linting**: Use Biome for linting and formatting
- **Type Checking**: Run TypeScript compiler for type checking
- **Testing**: Write tests for critical functionality
- **Code Review**: Review code before merging

## Task Completion Criteria

**All of the following commands MUST pass successfully before any task can be considered complete:**

1. **`yarn typecheck`** - TypeScript type checking must pass without errors
2. **`yarn format`** - Code formatting check must pass (no formatting issues)
3. **`yarn lint`** - Linting check must pass without warnings or errors
4. **`yarn run check`** - Combined linting and formatting check must pass
5. **`yarn test:run`** - All tests must pass without failures

**Note**: These commands should be run in sequence and all must succeed. If any command fails, the task is not complete and the issues must be resolved before proceeding.

## Git Workflow

- **Branch Naming**: Use descriptive branch names (feature/, fix/, refactor/)
- **Commit Messages**: Write clear, descriptive commit messages
- **Pull Requests**: Create PRs for all changes
- **Code Review**: Require code review before merging

## Development Environment

- **Node.js**: Use Node.js 18+ for development
- **Package Manager**: Use yarn for package management (NOT npm or pnpm)
- **IDE**: Use VS Code with recommended extensions
- **Debugging**: Use Electron DevTools for debugging

## Available Yarn Scripts

### Development

- **`yarn dev`**: Start development server with Electron rebuild for better-sqlite3
- **`yarn preview`**: Preview the built application

### Building

- **`yarn build`**: Type check, build, and package for all platforms
- **`yarn build:win`**: Build and package for Windows
- **`yarn build:mac`**: Build and package for macOS
- **`yarn build:linux`**: Build and package for Linux

### Type Checking

- **`yarn typecheck`**: Run TypeScript type checking for both web and node configs
- **`yarn typecheck:web`**: Type check web TypeScript files only
- **`yarn typecheck:node`**: Type check Node.js TypeScript files only

### Code Quality

- **`yarn format`**: Check code formatting with Biome
- **`yarn format:fix`**: Fix code formatting issues
- **`yarn lint`**: Check code for linting issues
- **`yarn lint:fix`**: Fix linting issues automatically
- **`yarn check`**: Run both linting and formatting checks
- **`yarn check:fix`**: Fix both linting and formatting issues

### Testing

- **`yarn test`**: Run tests in watch mode
- **`yarn test:ui`**: Run tests with UI interface
- **`yarn test:run`**: Run tests once and exit
- **`yarn test:coverage`**: Run tests with coverage report

### Setup & Utilities

- **`yarn prepare`**: Setup Husky git hooks
- **`yarn seed:test`**: Setup native modules and seed test data

## Build Process

- **Development**: Use `yarn dev` for development server
- **Production**: Use `yarn build` for production build
- **Platform-specific**: Use `yarn build:win|mac|linux` for specific platforms
- **Type Safety**: Always run `yarn typecheck` before building

## Testing Strategy

- **Unit Tests**: Test individual functions and components
- **Integration Tests**: Test component interactions
- **E2E Tests**: Test complete user workflows
- **Manual Testing**: Test on different platforms and configurations

## Performance Monitoring

- **Bundle Size**: Monitor bundle size and optimize
- **Runtime Performance**: Monitor runtime performance
- **Memory Usage**: Monitor memory usage and leaks
- **Database Performance**: Monitor database query performance

## Error Handling

- **Error Boundaries**: Use error boundaries for React components
- **Logging**: Implement comprehensive logging
- **Error Reporting**: Report errors to monitoring service
- **User Feedback**: Provide clear error messages to users

## Documentation

- **Code Comments**: Write clear, concise comments
- **README**: Keep README up to date
- **API Documentation**: Document API endpoints and types
- **Component Documentation**: Document component props and usage

## Internationalization

- **Centralized Translations**: Manage all user-facing strings through `@/i18n` translations (`src/i18n`)
- **No Inline Text**: Do not render plain text literals in frontend components; always use `t(translations.some.path)` or equivalent helpers
- **Phrase Ownership**: Add or update entries in `translations.ts` (and locale files) whenever new copy is needed, keeping keys descriptive and organized
- **Consistency**: Reuse existing translation keys instead of duplicating phrases, and ensure locale files remain in sync

## Security

- **Input Validation**: Validate all user inputs
- **File Access**: Restrict file access to necessary directories
- **IPC Security**: Secure IPC communication
- **Dependencies**: Keep dependencies up to date

## Deployment

- **Environment Variables**: Use environment variables for configuration
- **Build Optimization**: Optimize builds for production
- **Asset Optimization**: Optimize images and other assets
- **Update Mechanism**: Implement automatic updates
